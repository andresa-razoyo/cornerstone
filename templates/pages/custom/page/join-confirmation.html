{{#partial "page"}}

<main class="page confirmation" id="join-confirmation">
    <div class="confirmation__congrats-header">
        <span class="icon-special-confetti"></span>
        <h1 class="">Congratulations!</h1>
    </div>
    <div class="confetti">
        <span data-fun="15"></span>
    </div>
    <div class="confirmation__congrats-lead-wrapper">
        <div class="confirmation__congrats-lead-block container">
            <div class="confirmation__congrats-lead-image">
                {{> components/common/responsive-img
                image=image
                default_image=../theme_settings.consultant_image
                }}
            </div>
            <div class="confirmation__congrats-lead-content">
                <div class="confirmation__congrats-lead-text">
                    {{{page.content}}}
                </div>
            </div>
        </div>
        <div class="container order-number" style=" text-align: right; padding-top: 6px;">Your order number is:</div>
    </div>
    <div class="confirmation__steps-lead container">
        <div class="confirmation__steps-lead-text-wrapper">
            <h2 class="heading--2">Ready for your next steps?</h2>
            <p>We'll be sending you your order confirmation along with all the information you'll need to get going on your new adventure.</p>
        </div>
    </div>
    <div class="confirmation__step-banner step--red">
        <div class="confirmation__step-banner-container container">
            <div class="confirmation__step-banner-text-wrapper">
                <div class="step-number"><h1 class="heading--1">1</h1></div>
                <h2 class="heading--2">Get Training</h2>
            </div>
        </div>
    </div>
    <div class="confirmation__steps-text container">
        <p>Watch your inbox for two emails - your consultant ID number and your log in information for your back office, myHQ which features training, product information, updates and more!</p>
    </div>
    <div class="confirmation__step-banner step--lime">
        <div class="confirmation__step-banner-container container">
            <div class="confirmation__step-banner-text-wrapper">
                <div class="step-number"><h1 class="heading--1">2</h1></div>
                <h2 class="heading--2">Get Cash</h2>
            </div>
        </div>
    </div>
    <div class="confirmation__steps-text container">
        <p>Review the <a href="https://www.tastefullysimple.com/earncash" target="_blank">Ways to Earn Cash</a> article.</p>
        <p>Earn a bonus of up to $250 through the <a href="https://www.tastefullysimple.com/faststart" target="_blank">Fast Start Program</a></p>
        <p>Start Selling online! </p>
        <ul style="margin-left:2.25em; list-style:disc;line-height: 1.75em;">
            <li>
                You'll receive an email with login information which will set you up to work your business. 
                This same email contains information on how to sign up for TS Connected and ProPay.
                <ul style="margin-left:1.75em; list-style:circle">
                    <li>
                        TS Connected enables you to have a personal website and allows you to share your story,
                        available party dates, and more.
                    </li>
                    <li style="padding-bottom:10px;">
                        ProPay allows you to accept credit cards as payment from your guests.
                        Through Propay, you also get paid! You can have your Tastefully Simple commissions and bonuses
                        directly deposited to your Propay account, which you can then transfer to your own bank account
                        or use the funds to pay for orders, rather than waiting for a check in the mail.
                    </li>
                </ul>
            </li>
            <li>
                You receive a free trial of both of these services for TWO MONTHS! You just sign up in myHQ, your online "hub" to manage your Tastefully Simple Business!
                After your two month free trial, it's $13.94 per month.
            </li>
        </ul>
    </div>
    <div class="confirmation__step-banner step--teal">
        <div class="confirmation__step-banner-container container">
            <div class="confirmation__step-banner-text-wrapper">
                <div class="step-number"><h1 class="heading--1">3</h1></div>
                <h2 class="heading--2">Get Connected</h2>
            </div>
        </div>
    </div>
    <div class="confirmation__steps-text container">
        <div class="steps-social">
            <p>Join our <a href="https://www.facebook.com/groups/736377309855378/" target="_blank">Tastefully Simple Independent Consultant Facebook Group</a></p>
            <span class="social-icon-wrapper">
                <div class="congrats-share-icon">
                    <svg><use xlink:href="#icon-facebook"/></svg>
                </div>
            </span>
        </div>
        <br>
        <p>There you go. It's that simple!</p>
    </div>
    <div class="confirmation__congrats-contact container">
        <div class="contact-lead">
            <h1 class="heading--1">Questions?</h1>
            <p>Contact your sponsor or Customer Service team. They'd love to help you!</p>
        </div>
        <div class="contact-details-wrapper">
            <div class="contact-phone">
                <div class="contact-icon-wrapper">
                    <svg><use xlink:href="#icon-phone"/></svg>
                </div>
                <div class="contact-text" x-ms-format-detection="none">
                    <p class="bold">Call Us toll-free</p>
                    <p class="phone-number">866.448.6446</p>
                    <p>Monday - Thursday, 8am - 5pm CT</p>
                </div>
            </div>
            <div class="contact-email">
                <div class="contact-icon-wrapper">
                    <svg><use xlink:href="#icon-email"/></svg>
                </div>
                <div class="contact-text">
                    <p class=""><span class="bold">Email Us 24/7</span><br>
                        We'll do our best to respond within one business day!</p>
                    <a href="mailto:help@tastefullysimple.com">help@tastefullysimple.com</a>
                </div>
            </div>
            <div class="contact-chat">
                <div class="contact-icon-wrapper">
                </div>
                <div class="contact-text">
                    <p class=""><span class="bold">Chat With Us</span></p>
                    <p class="">Monday - Thursday, 8am - 5pm CT</p>
                    <p class="">Friday, 8am - 2pm CT</p>
                </div>
            </div>
        </div>
    </div>
</main>

{{/partial}}

{{> layout/base-noparty}}

<script>
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }

    function deleteCookie( name, path ) {
        if (getCookie(name)) {
            document.cookie = name + '=' +
                ((path) ? '; path=' + path : '; path=/') +
                '; expires=Thu, 01 Jan 1970 00:00:01 GMT';
        }
    }

    function SendOrderNotification() {
        // lastOrderId cookie is being set in Redirect
        // Confirmation Page script from BC Script Manager
        const orderId = getCookie('lastOrderId');
        console.log('JoinConfirmation::OrderId' + orderId);

        // Display order number in the page
        const $orderNumber = document.querySelector('#join-confirmation .order-number')
        $orderNumber.innerHTML = `<strong>Your order number is: ${orderId}</strong>`;

        const cid = getCookie('cid');
        const partyId = getCookie('pid');

        var queryString = 'oid=' + orderId + '&cid=' + cid
        if(partyId != null){
              if(partyId.length > 0) {
                 queryString = queryString +'&pid=' + partyId
              }
        }
        var url = `${window.theme_settings.ts_tsapi_base_url}/webhook/order/success?${queryString}`
        console.log(url);
        var frmSuccess = document.createElement("iframe");
        frmSuccess.style.width = '1px';
        frmSuccess.style.height = '1px';
        frmSuccess.style.border = '0';
        frmSuccess.src = url
        document.body.appendChild(frmSuccess);

        deleteCookie('pid');
        deleteCookie('phost');
        deleteCookie('pdate');
        deleteCookie('ptime');
        deleteCookie('ptotal');
    }

    try{
      SendOrderNotification();
    }catch(ex){console.log(ex)}
</script>
